---
description: 
globs: 
alwaysApply: true
---
# データベース設計（最終更新日: 2025/06/09）

## このファイルは何？
CQRS/ESアーキテクチャを前提にした、データベース設計のガイドラインを書いてある

## 各テーブル
### 共通のルール
CQRS/ESの原則にそって、各テーブル間ではリレーションを設定しない
Eventは決してどこにも直接関連をされてはいけない

### **Event（イベントソーシング用ストレージ）**

Event Sourcing を実現するために、状態の変化はすべてイベントとして記録されます。
レコード自体を更新することは禁止されています

ここのテーブルを「ソース・オブ・トゥルース」（Source of Truth） としてあつかう

---

### Queryをプレフィックスにもつもの
CQRS/ESの原則やデータを取得しやすくするためにQueryレイヤーのReadModelのクラスと1:1の関係
データを扱いやすくするために非正規のデータを扱う
万が一データがこわれたとしても Eventテーブルから再構築できる
