# ボブくん学習帳

## テスト実行ルール
テストを実行する際は、必ず最近編集したファイルに関連するテストだけを実行する。
例: 最近編集したファイルがapp/domains/event_store_domain.rbの場合、spec/domains/event_store_domain_spec.rbのテストを実行する。

## 設計原則
### YAGNI (You Aren't Gonna Need It)
必要になるまで機能を実装しない原則。将来必要になるかもしれないという理由だけで機能を実装すると、無駄な複雑さが増し、メンテナンスコストが高くなる。

例: `GameStateDomain`クラスで、現時点で必要ない`exchange_cards`メソッドを実装せず、必要になった時点で追加する。

これにより：
- コードがシンプルになる
- 開発速度が上がる
- 不要な機能のバグやメンテナンスコストを避けられる

### 責務の分離
各クラスは明確に定義された単一の責務を持つべきという原則。特に、ドメインロジックとデータアクセスの責務は分離すべき。

例: `GameState`モデル（ActiveRecord）にドメインロジックを漏らさず、`GameStateDomain`クラスがドメインオブジェクト（`Hand`）とデータモデルの間の変換を担当する。

これにより：
- コードの凝集度が高まる
- 変更の影響範囲が限定される
- テストが容易になる
- ドメインモデルの純粋性が保たれる

### コードの簡潔さ
コードは可能な限り簡潔に保ち、不要な複雑さを避けるべき。特に、不要なコメントや説明的な変数名は避け、コード自体が自己説明的であるようにする。

例: `GameStateDomain`クラスから不要なメソッドやコメントを削除し、必要最小限のコードだけを残す。

これにより：
- コードの可読性が向上する
- メンテナンスが容易になる
- バグの発生確率が減少する
- 新しい開発者がコードを理解しやすくなる

### 実装の優先順位
全体の設計や将来の拡張性が見えていても、現在必要な機能だけを実装することを優先する。

例: `Hand`クラスで、現時点で不要な値オブジェクトとしての機能（`==`や`hash`メソッド）を実装せず、必要になった時点で追加する。

これにより：
- 本当に必要な機能に集中できる
- コードがシンプルに保たれる
- 不要な複雑さが入り込むのを防げる
- 実際の要件に基づいた設計ができる

## テスト戦略
### ドメインクラスのテスト
ドメインクラスは、実際のデータベース更新をテストすべき。モックやスタブを使わず、実際のデータベースを使用することで、より現実的なテストになる。

例: `GameStateDomain`クラスのテストでは、`GameState`のモックを使わず、実際にデータベースに保存されたデータを検証する。

これにより：
- 実際のアプリケーションの動作に近いテストができる
- データベースとの連携に関する問題を早期に発見できる
- 統合テストの要素を持ち、より信頼性の高いテストになる