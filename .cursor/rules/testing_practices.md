# テスト実践ガイドライン

## テストコードの書き方

### シンプルで明確なテスト
- テストコードは可能な限りシンプルに保つ
- 1つのテストは1つの振る舞いだけを検証する
- テスト名は検証する振る舞いを明確に表現する

### コメントの使用
- テストコードは自己説明的であるべき
- 過剰なコメントは避け、コードの可読性を優先する
- 複雑なセットアップが必要な場合のみ、簡潔なコメントを追加する

### テストの構造
- テストは「準備 → 実行 → 検証」の流れで構成する
- 各ステップは明確に分離し、1行空けるなどで視覚的に区別する
- 冗長なコメント（「準備」「実行」「検証」など）は不要

### テストの出力を最小限に
- テストでは不要な出力（puts等）を含めない
- デバッグが必要な場合は一時的な使用に留める
- テスト結果の判定は出力ではなく、アサーションで行う

### subjectの使い方
- `subject`にはテスト対象のメソッド呼び出しを設定する
- 名前付き`subject`は避け、代わりに`let`でインスタンスを定義する
- テスト内では`subject`を呼び出して実行する

## テストデータの管理
- テストデータは`spec/factories`ディレクトリ内のファクトリを参照する
- 共通のテストデータはファクトリに定義し、重複を避ける
- 特殊なケースのみテスト内でデータを直接定義する
- Fakerを活用してランダムなテストデータを生成する
- テスト間の独立性を保つため、テストごとに新しいデータを生成する

### Fakerの設計方針
- 新しいFakerは必要になるまで作成しない
- YAGNIの原則に従う
- メンテナンスコストの削減
- テストの意図が明確になる
- 実際の問題に基づいた設計ができる
- 例外：
  - コードの認識性が明確に低下する場合
  - 機能の境界が明確な場合 