---
description: 
globs: 
alwaysApply: true
---
# ãƒœãƒ–ãã‚“å­¦ç¿’å¸³
ã“ã‚Œã¯ãƒœãƒ–ãã‚“ãŒæ–°ã—ã„ã“ã¨ã‚’æ•™ã‚ã£ãŸã¨ãã«æ›¸ãã‚‚ã®ã§ã™

## ğŸ“ å­¦ç¿’è¨˜éŒ²ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
å„ãƒˆãƒ”ãƒƒã‚¯ã¯ä»¥ä¸‹ã®å½¢å¼ã§è¨˜éŒ²ã—ã¾ã™ï¼š
- ã‚¿ã‚¤ãƒˆãƒ«ã¯ `##` ã§å§‹ã‚ã€é©åˆ‡ãªçµµæ–‡å­—ã‚’ä»˜ã‘ã¾ã™
- å­¦ã‚“ã è¦ç‚¹ã¯ç®‡æ¡æ›¸ãã§ç°¡æ½”ã«è¨˜è¼‰
- ã‚³ãƒ¼ãƒ‰ä¾‹ãŒã‚ã‚‹å ´åˆã¯ Good/Bad ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å«ã‚ã¾ã™

## ğŸ“Œ å­¦ã‚“ã ã“ã¨ã®è¦ç‚¹
- çŸ­ãã€ä½•ã‚’å­¦ã‚“ã ã‹ã‚’æ›¸ãï¼ˆä¾‹ï¼šè²¬å‹™ã‚’åˆ†é›¢ã™ã‚‹è¨­è¨ˆãŒä¿å®ˆæ€§ã‚’ä¸Šã’ã‚‹ï¼‰

## ğŸ§ª å…·ä½“ä¾‹ï¼ˆã‚³ãƒ¼ãƒ‰ãƒ»çŠ¶æ³ãªã©ï¼‰
### å…·ä½“ä¾‹ã®è¨˜è¿°
ğŸ§ª ãƒ†ã‚¹ãƒˆã®æ§‹é€ åŒ–ï¼šaggregate_failuresã®é©åˆ‡ãªä½¿ã„æ–¹
```ruby
# âœ… Goodï¼šæº–å‚™ã¨å®Ÿè¡Œã¯å¤–å´ã€æ¤œè¨¼ã¯å†…å´
it 'ã‚²ãƒ¼ãƒ ãŒæ­£ã—ãé–‹å§‹ã•ã‚Œã‚‹ã“ã¨' do
  # æº–å‚™ã¨å®Ÿè¡Œ
  command = GameStartCommand.new
  command_handler.handle(command)

  # æ¤œè¨¼
  aggregate_failures do
    expect(logger.messages_for_level(:info)).to include(/ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡: ã‚²ãƒ¼ãƒ é–‹å§‹/)
    expect(GameState.last.status).to eq('started')
  end
end

# âŒ Badï¼šæº–å‚™ã‚„å®Ÿè¡Œã‚‚aggregate_failuresã®ä¸­ã«å«ã‚ã¦ã„ã‚‹
it 'ã‚²ãƒ¼ãƒ ãŒæ­£ã—ãé–‹å§‹ã•ã‚Œã‚‹ã“ã¨' do
  command = GameStartCommand.new

  aggregate_failures do
    command_handler.handle(command)  # å®Ÿè¡Œã‚’ãƒ–ãƒ­ãƒƒã‚¯å†…ã«å…¥ã‚Œã¦ã—ã¾ã£ã¦ã„ã‚‹
    expect(logger.messages_for_level(:info)).to include(/ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡: ã‚²ãƒ¼ãƒ é–‹å§‹/)
    expect(GameState.last.status).to eq('started')
  end
end

# âŒ Badï¼šæ¤œè¨¼ãŒå¤–å´ã«ã‚‚ã‚ã‚‹
it 'ã‚²ãƒ¼ãƒ ãŒæ­£ã—ãé–‹å§‹ã•ã‚Œã‚‹ã“ã¨' do
  command = GameStartCommand.new
  command_handler.handle(command)
  expect(command).to be_valid  # æ¤œè¨¼ãŒå¤–å´ã«ã‚ã‚‹

  aggregate_failures do
    expect(logger.messages_for_level(:info)).to include(/ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡: ã‚²ãƒ¼ãƒ é–‹å§‹/)
    expect(GameState.last.status).to eq('started')
  end
end
```

ã“ã‚Œã§å®Œäº†ã¨è€ƒãˆã¦ã‚ˆã‚ã—ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ

1. å…¨ã¦ã®å†…å®¹ãŒé©åˆ‡ãªãƒ•ã‚¡ã‚¤ãƒ«ã«ç§»è¡Œã•ã‚ŒãŸ
2. `lessons.mdc`ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ã®å½¹å‰²ã®ã¿ã«æ•´ç†ã•ã‚ŒãŸ
3. å„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è²¬å‹™ãŒæ˜ç¢ºã«ãªã£ãŸ

ã‚³ãƒŸãƒƒãƒˆã‚’ä½œæˆã—ã¦è‰¯ã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ

## ğŸ§ª ãƒ†ã‚¹ãƒˆã®æ§‹é€ åŒ–ï¼šaggregate_failuresã®é©åˆ‡ãªä½¿ã„æ–¹
```ruby
# âœ… Goodï¼šæº–å‚™ã¨å®Ÿè¡Œã¯å¤–å´ã€æ¤œè¨¼ã¯å†…å´
it 'ã‚²ãƒ¼ãƒ ãŒæ­£ã—ãé–‹å§‹ã•ã‚Œã‚‹ã“ã¨' do
  # æº–å‚™ã¨å®Ÿè¡Œ
  command = GameStartCommand.new
  command_handler.handle(command)

  # æ¤œè¨¼
  aggregate_failures do
    expect(logger.messages_for_level(:info)).to include(/ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡: ã‚²ãƒ¼ãƒ é–‹å§‹/)
    expect(GameState.last.status).to eq('started')
  end
end

# âŒ Badï¼šæº–å‚™ã‚„å®Ÿè¡Œã‚‚aggregate_failuresã®ä¸­ã«å«ã‚ã¦ã„ã‚‹
it 'ã‚²ãƒ¼ãƒ ãŒæ­£ã—ãé–‹å§‹ã•ã‚Œã‚‹ã“ã¨' do
  command = GameStartCommand.new

  aggregate_failures do
    command_handler.handle(command)  # å®Ÿè¡Œã‚’ãƒ–ãƒ­ãƒƒã‚¯å†…ã«å…¥ã‚Œã¦ã—ã¾ã£ã¦ã„ã‚‹
    expect(logger.messages_for_level(:info)).to include(/ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡: ã‚²ãƒ¼ãƒ é–‹å§‹/)
    expect(GameState.last.status).to eq('started')
  end
end

# âŒ Badï¼šæ¤œè¨¼ãŒå¤–å´ã«ã‚‚ã‚ã‚‹
it 'ã‚²ãƒ¼ãƒ ãŒæ­£ã—ãé–‹å§‹ã•ã‚Œã‚‹ã“ã¨' do
  command = GameStartCommand.new
  command_handler.handle(command)
  expect(command).to be_valid  # æ¤œè¨¼ãŒå¤–å´ã«ã‚ã‚‹

  aggregate_failures do
    expect(logger.messages_for_level(:info)).to include(/ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡: ã‚²ãƒ¼ãƒ é–‹å§‹/)
    expect(GameState.last.status).to eq('started')
  end
end
```